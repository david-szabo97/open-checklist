import { h, Component } from 'preact'
import style from './style.css'

const icons = {
  list: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 485 485"><path d="M483.8 46.25H181.6c-.6 0-1.2.5-1.2 1.2v28.3c0 .6.5 1.2 1.2 1.2h302.2c.6 0 1.2-.5 1.2-1.2v-28.3c0-.7-.5-1.2-1.2-1.2z"/><circle cx="71.5" cy="253.35" r="37.9"/><circle cx="71.5" cy="419.55" r="38.1"/><path d="M181.6 128.15h142.8c.6 0 1.2-.5 1.2-1.2v-28.3c0-.6-.5-1.2-1.2-1.2H181.6c-.6 0-1.2.5-1.2 1.2v28.3c.1.7.6 1.2 1.2 1.2zM483.8 212.45H181.6c-.6 0-1.2.5-1.2 1.2v28.3c0 .6.5 1.2 1.2 1.2h302.2c.6 0 1.2-.5 1.2-1.2v-28.3c0-.7-.5-1.2-1.2-1.2zM181.6 294.35h142.8c.6 0 1.2-.5 1.2-1.2v-28.3c0-.6-.5-1.2-1.2-1.2H181.6c-.6 0-1.2.5-1.2 1.2v28.3c.1.6.6 1.2 1.2 1.2zM483.8 378.55H181.6c-.6 0-1.2.5-1.2 1.2v28.3c0 .6.5 1.2 1.2 1.2h302.2c.6 0 1.2-.5 1.2-1.2v-28.3c0-.7-.5-1.2-1.2-1.2zM324.4 429.85H181.6c-.6 0-1.2.5-1.2 1.2v28.3c0 .6.5 1.2 1.2 1.2h142.8c.6 0 1.2-.5 1.2-1.2v-28.3c0-.7-.5-1.2-1.2-1.2zM53.4 86.55l-26.1-26.3L0 87.45l26.2 26.2 27.1 27.3 27.2-27.1 62.5-62.1-27.1-27.3z"/></svg>`,
  listingOption: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.626 511.626"><path d="M63.953 164.453H9.135c-2.474 0-4.615.9-6.423 2.709C.903 168.972 0 171.114 0 173.589v54.817c0 2.473.903 4.619 2.712 6.424 1.809 1.803 3.949 2.712 6.423 2.712h54.818c2.474 0 4.615-.905 6.423-2.712 1.809-1.809 2.712-3.951 2.712-6.424v-54.817c0-2.475-.904-4.617-2.712-6.427-1.808-1.806-3.949-2.709-6.423-2.709zM63.953 383.722H9.135c-2.474 0-4.615.896-6.423 2.707C.903 388.238 0 390.378 0 392.854v54.82c0 2.471.903 4.609 2.712 6.42 1.809 1.813 3.949 2.714 6.423 2.714h54.818c2.474 0 4.615-.903 6.423-2.714 1.809-1.807 2.712-3.949 2.712-6.42v-54.82c0-2.477-.904-4.616-2.712-6.426-1.808-1.803-3.949-2.706-6.423-2.706zM63.953 274.082H9.135c-2.474 0-4.615.91-6.423 2.714S0 280.749 0 283.22v54.815c0 2.478.903 4.62 2.712 6.427 1.809 1.808 3.949 2.707 6.423 2.707h54.818c2.474 0 4.615-.896 6.423-2.707 1.809-1.807 2.712-3.949 2.712-6.427V283.22c0-2.471-.904-4.613-2.712-6.424-1.808-1.807-3.949-2.714-6.423-2.714zM63.953 54.817H9.135c-2.474 0-4.615.903-6.423 2.712S0 61.479 0 63.953v54.817c0 2.475.903 4.615 2.712 6.424s3.949 2.712 6.423 2.712h54.818c2.474 0 4.615-.9 6.423-2.712 1.809-1.809 2.712-3.949 2.712-6.424V63.953c0-2.475-.904-4.615-2.712-6.424-1.808-1.804-3.949-2.712-6.423-2.712zM502.49 383.722H118.771c-2.474 0-4.615.896-6.423 2.707-1.809 1.81-2.712 3.949-2.712 6.426v54.82c0 2.471.903 4.609 2.712 6.42 1.809 1.813 3.946 2.714 6.423 2.714H502.49c2.478 0 4.616-.903 6.427-2.714 1.81-1.811 2.71-3.949 2.71-6.42v-54.82c0-2.477-.903-4.616-2.71-6.426-1.811-1.804-3.95-2.707-6.427-2.707zM502.49 274.082H118.771c-2.474 0-4.615.91-6.423 2.714s-2.712 3.953-2.712 6.424v54.815c0 2.478.903 4.62 2.712 6.427 1.809 1.808 3.946 2.707 6.423 2.707H502.49c2.478 0 4.616-.896 6.427-2.707 1.81-1.807 2.71-3.949 2.71-6.427V283.22c0-2.471-.903-4.613-2.71-6.424-1.811-1.804-3.95-2.714-6.427-2.714zM508.917 57.529c-1.811-1.805-3.949-2.712-6.427-2.712H118.771c-2.474 0-4.615.903-6.423 2.712s-2.712 3.949-2.712 6.424v54.817c0 2.475.903 4.615 2.712 6.424s3.946 2.712 6.423 2.712H502.49c2.478 0 4.616-.9 6.427-2.712 1.81-1.809 2.71-3.949 2.71-6.424V63.953c-.001-2.474-.904-4.615-2.71-6.424zM502.49 164.453H118.771c-2.474 0-4.615.9-6.423 2.709-1.809 1.81-2.712 3.952-2.712 6.427v54.817c0 2.473.903 4.615 2.712 6.424 1.809 1.803 3.946 2.712 6.423 2.712H502.49c2.478 0 4.616-.905 6.427-2.712 1.81-1.809 2.71-3.951 2.71-6.424v-54.817c0-2.475-.903-4.617-2.71-6.427-1.811-1.806-3.95-2.709-6.427-2.709z"/></svg>`
}

const BottomNavigationBarItem = ({ active, icon, name, ...props }) => (
  <div class={`${style.BottomNavigationBarItem} ${active ? style.BottomNavigationBarItem_Active : ''}`} {...props}>
    <div class={style.BottomNavigationBarItem__Icon} dangerouslySetInnerHTML={{__html: icons[icon] ? icons[icon] : icon}} />
    <div class={style.BottomNavigationBarItem__Name}>{name}</div>
  </div>
)

export default class BottomNavigationBar extends Component {
  onItemClicked = (index) => {
    if (this.props.selectedItemIndex === index) {
      return
    }

    this.props.onItemSelected(index)
  }

  render ({ selectedItemIndex, items }) {
    return (
      <div class={style.BottomNavigationBar}>
        {items.map((item, index) => <BottomNavigationBarItem active={index === selectedItemIndex} onClick={() => this.onItemClicked(index)} {...item} />)}
      </div>
    )
  }
}
